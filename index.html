<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Massas - Cora√ß√£o do Contestado</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="img/logo.png" type="image/png">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
* { margin:0; padding:0; box-sizing:border-box; font-family:'Inter',sans-serif; }
body { display:flex; height:100vh; background:#f5f6fa; color:#333; }
.btn-delete {
    background:#fee2e2;
    color:#b91c1c;
    border:none;
    padding:6px 10px;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
    transition:0.2s;
}
.inativo {
    opacity: 0.45;
    filter: grayscale(60%);
}
.msg-erro { color:#b91c1c; margin-bottom:10px; }
.msg-ok { color:#15803d; margin-bottom:10px; }    
.btn-delete:hover {
    background:#fecaca;
    transform:scale(1.05);
}

.sidebar { width:250px; background:#1e1e2f; color:#fff; display:flex; flex-direction:column; }
.logo { padding:25px 20px; text-align:center; font-weight:700; font-size:20px; }

.menu-item { padding:14px 20px; cursor:pointer; color:#cfd1d9; display:flex; justify-content:space-between; align-items:center; }
.menu-item:hover { background:rgba(255,255,255,0.08); color:#fff; }

.submenu { display:none; padding-left:15px; }

.menu-link { display:flex; align-items:center; gap:10px; padding:10px 20px; color:#cfd1d9; text-decoration:none; transition:0.2s; }
.menu-link:hover { background:rgba(255,255,255,0.1); color:#fff; }

.menu-link.ativo {
    background: rgba(255,255,255,0.15);
    color: #fff;
    border-left: 3px solid #143e81;
}

.seta { display:inline-block; transition: transform 0.3s ease; }
.seta.aberta { transform: rotate(180deg); }

.content { flex:1; padding:20px; }

/* ===== BANNER ===== */
.banner {
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#8db2fd;
    border-radius:18px;
    padding:25px 30px;
    margin-bottom:25px;
}
.sayHello { max-width:65%; }
.sayName { font-size:22px; font-weight:700; margin-bottom:6px; color:#0f172a; }
.sayText { color:#475569; font-size:14px; line-height:1.5; }
.imageShow img { width:150px; }

/* ===== PAINEL ===== */
.panel { background:#fff; border-radius:16px; padding:20px; box-shadow:0 10px 25px rgba(0,0,0,0.08); }
.panel-header,.panel-header2 { display:flex; justify-content:space-between; align-items:center; margin-bottom:18px; padding-bottom:10px; border-bottom:1px solid #eee; }
.panel-header h2,.panel-header2 h2 { font-size:22px; font-weight:600; }

input { width:100%; padding:12px; margin-bottom:7px; border-radius:10px; border:1px solid #ddd; }
.search { width:390px; padding:15px 26px; border-radius:10px; border:1px solid #ddd; }

table { width:100%; border-collapse:collapse; }
th,td { padding:10px; text-align:left; }
th { font-size:13px; text-transform:uppercase; color:#6b7280; background:#f9fafb; }
td { border-bottom:1px solid #eee; }

.switch { position:relative; width:42px; height:22px; display:inline-block; }
.switch input { display:none; }
.slider { position:absolute; cursor:pointer; background-color:#ccc; border-radius:22px; inset:0; transition:.3s; }
.slider:before { content:""; position:absolute; height:18px; width:18px; left:2px; bottom:2px; background:#fff; border-radius:50%; transition:.3s; }
input:checked + .slider { background:#28a745; }
input:checked + .slider:before { transform:translateX(20px); }

button:hover { opacity:0.9; transform:scale(1.02); }
</style>
</head>

<body>
<div class="sidebar">
    <div class="logo">Cora√ß√£o do Contestado</div>

    <div class="menu-item" onclick="toggleMenu()">
        Produtos <span id="seta-menu" class="seta">‚ñæ</span>
    </div>

    <div class="submenu" id="submenu-produtos">
        <a href="#" onclick="ativarMenu(this); carregarPesquisar(); return false;" class="menu-link">Pesquisar</a>
        <a href="#" onclick="ativarMenu(this); carregarAdicionar(); return false;" class="menu-link">Adicionar</a>
    </div>
</div>

<div class="content">
    <div id="main-content">

        <!-- BANNER -->
        <div class="banner">
            <div class="sayHello">
                <div class="sayName" id="saudacaoNome"></div>
                <div class="sayText" id="saudacaoTexto"></div>
            </div>
            <div class="imageShow">
                <img id="imgSaudacao" src="" alt="Boas-vindas">
            </div>
        </div>

    </div>
</div>

<script>
/* ===== SAUDA√á√ÉO DIN√ÇMICA ===== */
function gerarSaudacao() {
    const hora = new Date().getHours();
    let saudacao, texto, imagem;

    if (hora < 12) {
        saudacao = "Bom dia, Joaquim!";
        texto = "Comece o dia com foco. Pequenos avan√ßos geram grandes resultados.";
        imagem = "https://cdn-icons-png.flaticon.com/512/869/869869.png";
    } else if (hora < 18) {
        saudacao = "Boa tarde, Joaquim!";
        texto = "Depois de uma manh√£ produtiva, mantenha o ritmo e finalize o dia forte.";
        imagem = "https://cdn-icons-png.flaticon.com/512/869/869869.png";
    } else {
        saudacao = "Boa noite, Joaquim!";
        texto = "Hora de desacelerar. Organize o amanh√£ e descanse a mente.";
        imagem = "https://cdn-icons-png.flaticon.com/512/869/869869.png";
    }

    document.getElementById("saudacaoNome").innerText = saudacao;
    document.getElementById("saudacaoTexto").innerText = texto;
    document.getElementById("imgSaudacao").src = imagem;
}
gerarSaudacao();

/* ===== MENU ===== */
function toggleMenu() {
    const s = document.getElementById("submenu-produtos");
    const seta = document.getElementById("seta-menu");
    const aberto = s.style.display === "block";
    s.style.display = aberto ? "none" : "block";
    seta.classList.toggle("aberta", !aberto);
}

function ativarMenu(el) {
    document.querySelectorAll(".menu-link").forEach(link => link.classList.remove("ativo"));
    el.classList.add("ativo");
}

/* ===== PRODUTOS ===== */
function escapeHTML(text) {
    return text.replace(/[&<>"']/g, m => ({ "&":"&amp;", "<":"&lt;", ">":"&gt;", '"':"&quot;", "'":"&#039;" }[m]));
}
function obterProdutos() { return JSON.parse(localStorage.getItem("produtos")) || []; }
function salvarProdutos(p) { localStorage.setItem("produtos", JSON.stringify(p)); }

function carregarPesquisar() {
    document.getElementById("main-content").innerHTML = `
    <div class="panel">
        <div class="panel-header">
            <h2>Produtos</h2>
            <input id="buscaProduto" class="search" placeholder="Digite para buscar..." onkeyup="filtrarProdutos()">
        </div>
        <div id="infoBusca" style="color:#6b7280; margin-bottom:20px;"></div>
        <table>
            <thead><tr><th>C√≥digo</th><th>Produto</th><th>Categoria</th><th>Pre√ßo</th><th>Estoque</th><th>Status</th><th>Remover</th></tr></thead>
            <tbody id="tabelaProdutos"></tbody>
        </table>
    </div>`;
}

function filtrarProdutos() {
    const filtro = document.getElementById("buscaProduto").value.toLowerCase();
    const tabela = document.getElementById("tabelaProdutos");
    const info = document.getElementById("infoBusca");
    tabela.innerHTML = "";
    if (!filtro) return;

    const resultados = obterProdutos().filter(p =>
        p.codigo.toLowerCase().includes(filtro) ||
        p.nome.toLowerCase().includes(filtro) ||
        (p.categoria || "").toLowerCase().includes(filtro)
    );

    info.innerText = resultados.length ? `${resultados.length} produto(s)` : "Nenhum produto encontrado.";
    resultados.forEach(p => {
        tabela.innerHTML += `<tr class="${p.status ? '' : 'inativo'}">
            <td>${escapeHTML(p.codigo)}</td>
            <td>${escapeHTML(p.nome)}</td>
            <td>${escapeHTML(p.categoria||"-")}</td>
            <td>R$ ${p.precoKg.toFixed(2)}</td>
            <td>${p.estoque}</td>
          <td>
  <label class="switch">
   <input type="checkbox" ${p.status?"checked":""} onchange="alternarStatus('${p.codigo}')">

    <span class="slider"></span>
  </label>
</td>

           <td>
  <button class="btn-delete" onclick="removerProduto('${p.codigo}')">
    üóë Remover
  </button>
</td>
        </tr>`;
    });
}

function carregarAdicionar() {
    document.getElementById("main-content").innerHTML = `
    <div class="panel">
        <div class="panel-header2"><h2>Adicionar Produto</h2></div>
        <div id="msg"></div>
        <input id="codigo" placeholder="C√≥digo">
        <input id="nome" placeholder="Nome do Produto">
        <input id="categoria" placeholder="Categoria">
        <input id="precoKg" type="number" step="0.01" placeholder="Pre√ßo">
        <input id="estoque" type="number" placeholder="Estoque">
        <button onclick="adicionarProduto()" style="padding:12px;width:100%;border:none;border-radius:10px;background:#1e1e2f;color:#fff;">Salvar</button>
    </div>`;
}

function adicionarProduto() {
    const produtos = obterProdutos();

    const codigoEl = document.getElementById("codigo");
    const nomeEl = document.getElementById("nome");
    const categoriaEl = document.getElementById("categoria");
    const precoEl = document.getElementById("precoKg");
    const estoqueEl = document.getElementById("estoque");
    const msgEl = document.getElementById("msg");

    const codigo = codigoEl.value.trim();
    const nome = nomeEl.value.trim();

    if (!codigo || !nome) {
    msgEl.className = "msg-erro";
    msgEl.innerText = "Preencha c√≥digo e nome!";
    return;
}


    produtos.push({
        codigo: codigo,
        nome: nome,
        categoria: categoriaEl.value,
        precoKg: +precoEl.value || 0,
        estoque: +estoqueEl.value || 0,
        status: true
    });

    salvarProdutos(produtos);
    msgEl.className = "msg-ok";
msgEl.innerText = "Produto salvo!";

    codigoEl.value = "";
    nomeEl.value = "";
    categoriaEl.value = "";
    precoEl.value = "";
    estoqueEl.value = "";
}


function alternarStatus(codigo) {
    const produtos = obterProdutos();
    const p = produtos.find(x => x.codigo === codigo);
    if (p) { p.status = !p.status; salvarProdutos(produtos); filtrarProdutos(); }
}

function removerProduto(codigo) {
    salvarProdutos(obterProdutos().filter(p => p.codigo !== codigo));
    filtrarProdutos();
}
</script>
</body>
</html>





